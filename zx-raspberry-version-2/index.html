
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="The personal blog of PJ Evans">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Nothing+You+Could+Do&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Coustard&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link href="/src/css/mrpjevans.css" rel="stylesheet">

		<link rel="icon" type="image/png" size="256x256" href="/images/pj-blog-logo-256.png">

		<link rel="icon" type="image/png" size="512x512" href="/images/pj-blog-logo-512.png">

		<link rel="alternate" type="application/rss+xml" title="Mr PJ Evans Blog Feed" href="https://mrpjevans.com/feed/feed.xml">

		<title>Mr PJ Evans | ZX Raspberry Version 2</title>

  </head>
  <body data-bs-theme="dark">

    <div class="container">
      <div class="row justify-content-md-center">
        <div class="col-md-8 col-sm-12 col-lg-6">

					<header>
						<nav class="navbar bg-dark navbar-expand-lg border-bottom border-body" data-bs-theme="dark">
							<div class="container-fluid">
								<a class="navbar-brand logo" href="/">Mr PJ Evans</a>
								<div>
									<div>
										<ul class="navbar-nav me-auto mb-2 mb-lg-0">
											<li class="nav-item">
											<a class="nav-link " href="/tags">Tags</a>
											</li>
											<li class="nav-item">
												<a class="nav-link " href="/about">About</a>
											</li>
										</ul>
									</div>	
								</div>
							</div>
						</nav>
					</header>

					<main>
          	
  

  

  

  
    
    


    <h1 class="h1-with-date">ZX Raspberry Version 2</h1>

<p class="meta-date text-center">27 Sept 2017</p>

<picture><source type="image/webp" srcset="/images/IMG_0440-e1506538112481-1-1000w.webp 1000w"><img src="/images/IMG_0440-e1506538112481-1-1000w.jpeg" alt="" width="1000" height="1333"></picture>

<article>
  <p><em>In which our hero downsizes radically</em></p><p>A couple of months ago we held the first in the ‘regeneration’ of the <a href="https://mkraspberryjam.org/?ref=stowe.local">Milton Keynes Raspberry Jam</a>. I took along my <a href="http://mrpjevans.com/2015/12/building-the-zx-raspberry-part-one/?ref=stowe.local">ZX Raspberry</a> for all to see and wonder over. One eager and Sinclair-experienced attendee soon put me in my place. “Shame it’s so laggy”, he said. Ah. A brief defence of the necessary compromises in design ensued but I had to admit he was right, it <em>was</em> laggy; too laggy to be of any real use if you finally want that Jetpac high-score.</p><p>A couple of weeks later, in one of those classic ‘shower’ moments, I realised that the build was vastly overcomplicated. Recent Raspberry Pis have more than enough GPIO inputs for the ZX Spectrum’s keyboard matrix (13) and my experiences with the <a href="http://mrpjevans.com/2017/06/an-atari-2600-in-a-cartridge/?ref=stowe.local">Atarpi</a> project had shown me that handling keyboard inputs in Raspian had come a long way.</p><p>So here’s the original ZX Raspberry:</p><figure class="kg-card kg-image-card"><picture><source type="image/webp" srcset="/images/IMG_0437-1000w.webp 1000w"><img src="/images/IMG_0437-1000w.jpeg" class="kg-image" alt="" loading="lazy" width="1000" height="1333"></picture></figure><p>And here’s our version 2:</p><figure class="kg-card kg-image-card"><picture><source type="image/webp" srcset="/images/IMG_0440-e1506538112481-1000w.webp 1000w"><img src="/images/IMG_0440-e1506538112481-1000w.jpeg" class="kg-image" alt="" loading="lazy" width="1000" height="1333"></picture></figure><p>Keep it simple, right? This version takes all the keyboard lines direct to the GPIO (with a switch for handling keyboard modes) and uses a Python script to scan the keyboard for presses which uses the python-uinput module to inject those keypresses into the kernel. Did I think Python would work? Not for a second. It did. Brilliantly. The new ZX Raspberry v2 is significantly more responsive and the Raspberry Pi Zero W has plenty of horsepower to run everything.</p><p>I also decided to move to <a href="https://retropie.org.uk/?ref=stowe.local">RetroPie</a> as the OS for this project as it is just <em>so</em> good and refined. Setup was a breeze and Fuse works perfectly. I’ve finally got rid of that dratted mouse pointer too. As a bonus, the bluetooth capabilities of the Zero W mean I could pair a PS3 controller and use it as a Kempston joystick. Again, never expected it to work. Again, worked perfectly.</p><p>My ZX Raspberry v2 made its debut at the second Milton Keynes Raspberry Jam last weekend. There were no complaints*.</p><p>* Ok, one. “Have you got Chuckie Egg?” “Does this look like a BBC to you?”</p><p><strong>UPDATE</strong>: After many requests, I’ve made the <a href="https://github.com/mrpjevans/zxscanner?ref=stowe.local">Python keyboard scanning script available on Github</a> along with some notes to get you started.</p>
</article>


<div class="row">
  <div class="col-12 mb-3">
    
      
        <a href="/tags/makes" class="badge rounded-pill text-bg-primary">Makes</a>
      
    
      
        <a href="/tags/raspberry-pi" class="badge rounded-pill text-bg-primary">Raspberry Pi</a>
      
    
      
        <a href="/tags/vintage-tech" class="badge rounded-pill text-bg-primary">Vintage Tech</a>
      
    
      
    
  </div>
</div>
<p class="backlink">
  <a href="/">Home</a>
</p>
					</main>

        </div>

        <div class="row justify-content-md-center p-0">
					
          <footer class="col-md-8 col-sm-12 col-lg-6 footer">

            <hr>

            <div xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
						  
							<a id="rss-icon" href="/feed/feed.xml" aria-label="RSS Feed">
								<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-rss-fill" viewBox="0 0 16 16">
  <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1.5 2.5c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1 0-2m0 4a6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1 0-2m.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"></path>
</svg>
							</a>

							<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer">
							<span class="cc">
								<picture><source type="image/webp" srcset="/images/by-nc-sa.eu-403w.webp 403w"><img src="/images/by-nc-sa.eu-403w.jpeg" alt="CC BY-NC-SA" width="403" height="141"></picture>
							</span>
						</a>

            <p></p>

          </div></footer>
        </div>

      </div>

    </div>

		<script data-goatcounter="https://mrpjevans.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>
  </body>
</html>